## Overview
The Python DataViewer is a tool developed to help visualize the data captured on EmotiBit. It is an interactive tool where you can view the entire data at once, zoom in and out of any part in the time series, compare data accross different channels and get an overall sense of the data captured.
## Getting Started
- You need to have python installed on your system to use the dataViewer. The easiest way to use get python is to install anaconda navigator.
- Click [here](https://www.anaconda.com/products/individual) to download the latest anaconda release. Make sure to get Anaconda distribution for Python 3.7
- Once installed, you will have access to Anaconda Navigator and Anaconda prompt.
- Open the Anaconda prompt. You can do so by typing `anaconda` in the start menu and choosing `Anaconda prompt`.
- The easiest way to create an environment required for dataViewer is to import the environment using a yml file. 
- We have provided a `env.yml` with this repo. You can find the file in `py/anaconda-environments/EmotiBit-pyenv.yml`.
- In the `anaconda prompt`, type the following command to create the environment
  - `conda env create -f <environment>.yml`. Replace <environment> with the path to the **yml** file.
- When finished, close the `anaconda prompt` and open the `anaconda navigator`. choose `EmotiBit-pyenv` as the active environment. 
- Launch spyder. Open the  file `dataviewer_example.py`
- To succesfully build the file, you will need to add paths to the **PYTHONPATHMANAGER**. 
  - To do so, click on `Tools` > `PYTHONPATHMANAGER` > `Add`. Add the path to the `py` folder.
- You will need to close and restart the `Spyder` for the changes to take effect.
- Follow the steps below to load the data.
- Press `Run` to run the example.


### Steps to load data
 - Specify the path to the folder containing the parsed data(The output of the data parser), inside the double quotes of the _variable_ **file_dir0**.
   - Example `C:\Documents\data\2019-08-22_17-09-06-681058\dataParsed`
 - Specify the file name in the double quotes of the _variable_ **file_base**. This will be the name of the file(wihout any file extension) generated by the emotibit.
   - Ex: `2019-08-22_17-09-06-681058`.
 - You can provide extra instructions before runtime to Enable plotting User Notes or DC. To do so, go to <br/>
 `Run->Configuration per file`(In your Spyder Window).
   - Check the `command line options` check box. In the text box next to the checkbox, enter parameters as shown below:
     - _parameter1_ value _parameter2_ value
     - The parameters available are **hide_dc** and **usernote_toggle**.
     - Ex: `hide_dc MX,MY,MZ` will prevent plotting of DC markers on the MX, MY and MZ sensor data
     - Ex: `usernote_toggle False` will not display any user notes.
     - Ex: `hide_dc MX,MY,MZ usernote_toggle False` will perform both of the above actions.
     - The tags for which the DC markers should be avoided must be separated by _commas_
     - click on `Ok`
     - Run the cmmand `%matplotlib qt` on the spyder terminal to enable plotting graphs on a separate window.
     - Run the file in Spyder.
### The python visualizer has the folowing functions available for use
- You can **zoom** into any part of the plot using the default `zoom button` provided in the spyder. Just press the magnifying glass icon, click and drag anywhere on the plot to zoom in on that portion.
- The `move button` is located next to the `zoom button`. you can press this button and _click and drag_ on any plot to slide through the data. If you press the `x` button or the `y` button simultaneously when moving, the data is moves only in the _x or the y direction_, respectively.
- You can press the home button to go back to the original view of the data.
- **Keyboard Shortcuts**
  - **_hide/show DC markers_**: The Cutoffs(instances when the sensor data goes out of bounds) in the data, are marked with red verticle lines. You can toggle the visibility of the DC markers in any individual plot by clicking on the plot and presing the `space` key. Pressing it once remoes the DC markers from that plot. Pressing it again will re-mark the lines on the plot.
  - **_Y-Axis Autoscale_**: After you zoom into any portion of the data, the data on each plot can be scaled . by pressing the `a` key. This adjusts the Y-Axis limits for each plot.
  - **_Mark any point in time on the fly_**: Click on the point(any location within the plot) you want to highlihgt, and press `m`. This will highlight a region around that point in time on all plots. This is great way to see the relative position on any activity across plots. Click anywhere on the figure, outside the plots to remove this highlight
